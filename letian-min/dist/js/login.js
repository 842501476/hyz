"use strict";function update(){var r=$.cookie("name");r?($("#reg").css("display","none"),$("#login").css("display","none"),$("#logout").css("display","block"),$("#userinfo").html("欢迎您："+r)):($("#reg").css("display","block"),$("#login").css("display","block"),$("#logout").css("display","none"),$("#userinfo").html(""))}$(function(){$("#verifyUserNameMsg").html("*").css("color","red"),$("#verifyUserNameMsg1").html("*").css("color","red"),$("#verifyUserNameMsg2").html("*").css("color","red"),$("#btnLogin").on("click",function(){$("#username2").val().trim()&&$("#password2").val().trim()?$.ajax({type:"post",url:"../api/login.php",data:{a:"login",username:$("#username2").val().trim(),password:$("#password2").val().trim()},success:function(r){0==r?alert("密码或用户名错误！"):($.cookie("name",$("#username2").val().trim(),{expires:1,path:"/"}),window.location.href="../index.html",update())}}):alert("不能为空")});var r=!1;$("#username1").on("blur",function(){$("#username1").val().trim()?checkReg.name($("#username1").val().trim())?(r=!0,$.ajax({type:"post",url:"../api/login.php",data:{a:"yz",username:$("#username1").val().trim()},success:function(r){if(0==r){var e="用户名可以使用";$("#verifyUserNameMsg").html(e).css("color","green")}else{e="用户名已存在";$("#verifyUserNameMsg").html(e).css("color","red")}}})):$("#verifyUserNameMsg").html("用户名格式不正确!").css("color","red"):$("#verifyUserNameMsg").html("*").css("color","red")}),$("#password1").on("input",function(){6<=$("#password1").val().trim().length?$("#verifyUserNameMsg1").html("密码强度：一般").css("color","orange"):$("#password1").val().trim().length<6?$("#verifyUserNameMsg1").html("密码强度：差").css("color","red"):10<=$("#password1").val().trim().length?$("#verifyUserNameMsg1").html("密码强度：强").css("color","red"):$("#verifyUserNameMsg1").html("*").css("color","red")}),$("#password0").on("input",function(){$("#password1").val().trim()===$("#password0").val().trim()?$("#verifyUserNameMsg2").html("匹配").css("color","green"):$("#verifyUserNameMsg2").html("*").css("color","red")}),$("#random").html(randomCode()),$("#random").css("background",randomColor(16)),$("#random").on("click",function(){$("#random").css("background",randomColor(16)),$("#random").html(randomCode())}),$("#btnReg").on("click",function(){$("#username1").val().trim()&&$("#password1").val().trim()===$("#password0").val().trim()&&r?$("#tex").val().toLowerCase()==$("#random").html().toLowerCase()?$.ajax({type:"post",url:"../api/login.php",data:{a:"reg",username:$("#username1").val().trim(),password:$("#password1").val().trim()},success:function(r){alert(r),window.location.href="../index.html"}}):(alert("验证码输入不正确"),$("#random").html(randomCode())):alert("注册信息填写错误！")}),$(function(){$("#gouwuche").on("click",function(){$.cookie("name")||alert("请先登录！")})}),$("#logout").on("click",function(){alert("退出成功！"),$.removeCookie("name",{path:"/"}),update()})});